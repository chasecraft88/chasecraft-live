<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameVibeHub - Epic Gaming Community</title>
    <meta name="description" content="Join GameVibeHub for Hearthstone streams, AI memes, polls, and global gaming vibes! Watch live on TikTok @whispers_from_within. #GameVibeHub">
    <meta name="keywords" content="Hearthstone, Magic: The Gathering, Fortnite, Minecraft, TikTok, gaming, AI memes, Grok, Discord, GameVibeHub">
    <meta name="author" content="ChaseCraft88">
    <!-- Open Graph for Social Sharing -->
    <meta property="og:title" content="GameVibeHub - Epic Gaming Community">
    <meta property="og:description" content="Join the ultimate gaming hub for streams, memes, and community fun!">
    <meta property="og:image" content="https://chasecraft88.github.io/chasecraft-live/og-image.jpg">
    <meta property="og:url" content="https://chasecraft88.github.io/chasecraft-live/">
    <!-- Tailwind CSS CDN -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Google Fonts (Orbitron) -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Typed.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
    <!-- Particles.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <!-- Lottie Player CDN -->
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <style>
        body {
            font-family: 'Orbitron', sans-serif;
            background: #1a202c;
            color: #e2e8f0;
            scroll-behavior: smooth;
            overflow-x: hidden;
            position: relative;
            cursor: none;
        }
        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(135deg, #1a202c, #2d3748);
        }
        #custom-cursor {
            position: fixed;
            pointer-events: none;
            z-index: 1000;
            transition: transform 0.1s ease;
        }
        #custom-cursor svg {
            filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.8));
        }
        .cursor-trail {
            position: fixed;
            width: 8px;
            height: 8px;
            background: rgba(255, 215, 0, 0.5);
            border-radius: 50%;
            pointer-events: none;
            z-index: 999;
            animation: fadeTrail 0.5s ease-out forwards;
        }
        @keyframes fadeTrail {
            to { opacity: 0; transform: scale(0); }
        }
        #sprite {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            animation: floatDown 15s linear infinite, bob 2s ease-in-out infinite, sway 4s ease-in-out infinite;
            pointer-events: none;
        }
        @keyframes floatDown {
            0% { top: -100px; }
            100% { top: 100%; }
        }
        @keyframes bob {
            0%, 100% { transform: translate(-50%, 0); }
            50% { transform: translate(-50%, -10px); }
        }
        @keyframes sway {
            0%, 100% { transform: translate(-50%, 0); }
            50% { transform: translate(-60%, 0); }
        }
        #sprite svg {
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
            animation: pulse 1.5s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .mana-explosion {
            position: absolute;
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.8), transparent);
            border-radius: 50%;
            animation: explode 0.5s ease-out forwards;
            pointer-events: none;
        }
        @keyframes explode {
            to { transform: scale(2); opacity: 0; }
        }
        section {
            opacity: 0;
            transition: opacity 0.8s ease-out, box-shadow 0.8s ease-out;
            position: relative;
        }
        section.visible {
            opacity: 1;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .btn {
            transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
        }
        .btn:hover {
            transform: scale(1.05);
            background-color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
        }
        .hero-bg {
            background: linear-gradient(180deg, #4b0082, #1a202c);
            height: 100vh;
            position: relative;
            z-index: 1;
        }
        .typed-text {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.2rem;
            color: #ffffff;
            min-height: 2.5rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        }
        .feature-card, .membership-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            perspective: 1000px;
        }
        .feature-card:hover, .membership-card:hover {
            transform: rotateY(10deg) translateY(-10px);
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.5);
        }
        .rainbow-border {
            animation: rainbow 2s linear infinite;
        }
        @keyframes rainbow {
            0% { border-color: #ff0000; }
            16% { border-color: #ff9900; }
            33% { border-color: #33cc33; }
            50% { border-color: #00ccff; }
            66% { border-color: #6600cc; }
            83% { border-color: #ff3399; }
            100% { border-color: #ff0000; }
        }
        #spin-wheel {
            animation: spinGlow 2s ease-in-out infinite;
        }
        @keyframes spinGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.8); }
            50% { box-shadow: 0 0 20px rgba(255, 215, 0, 1); }
        }
        #meme-canvas {
            position: relative;
            width: 300px;
            height: 200px;
        }
        #meme-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Press Start 2P', cursive;
            font-size: 16px;
            color: #ffffff;
            text-shadow: 2px 2px #000000;
            text-align: center;
            width: 90%;
        }
        #grok-panel {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100%;
            background: #1a202c;
            border-left: 4px solid #ffd700;
            z-index: 1000;
            transition: right 0.3s ease;
            overflow-y: auto;
        }
        #grok-panel.open {
            right: 0;
        }
        #grok-panel .chat-area {
            padding: 20px;
            color: #e2e8f0;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.9rem;
        }
        #grok-panel .chat-message {
            background: #2d3748;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            opacity: 0;
            animation: fadeInChat 0.5s ease forwards;
        }
        @keyframes fadeInChat {
            to { opacity: 1; }
        }
        #grok-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
        }
        #book-banner {
            position: sticky;
            top: 0;
            z-index: 100;
            background: #ffd700;
            color: #1a202c;
            padding: 10px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }
        #book-banner a {
            color: #4b0082;
            font-weight: bold;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Particles.js Background -->
    <div id="particles-js"></div>

    <!-- Custom Cursor -->
    <div id="custom-cursor">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <rect x="4" y="4" width="12" height="12" fill="#ffd700" />
            <rect x="6" y="6" width="8" height="8" fill="#ffffff" />
            <rect x="8" y="8" width="2" height="2" fill="#ffd700" />
        </svg>
    </div>

    <!-- Floating Sprite -->
    <div id="sprite">
        <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
            <rect x="8" y="8" width="24" height="24" fill="#ffd700" />
            <rect x="12" y="12" width="16" height="16" fill="#ffffff" />
            <rect x="16" y="16" width="4" height="4" fill="#ffd700" />
            <rect x="24" y="16" width="4" height="4" fill="#ffd700" />
        </svg>
    </div>

    <!-- Book Promo Banner -->
    <div id="book-banner" class="fade-in" role="banner">
        <p>Discover <strong>Echo of Silence: Whispers of the Unseen</strong>! 
        <a href="https://www.amazon.com/Echo-Silence-Whispers-Unseen-ebook/dp/B0DDJVPYRB?ref_=ast_author_dp" target="_blank">Get it now on Amazon!</a></p>
    </div>

    <!-- Grok Side Panel -->
    <button id="grok-toggle" class="btn bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg" aria-label="Toggle Grok Chat">Chat with Grok</button>
    <div id="grok-panel" role="complementary">
        <div class="chat-area">
            <h3 class="text-xl font-bold mb-4 text-yellow-500">Grok’s GameVibe Banter</h3>
            <div id="grok-chat"></div>
            <button id="grok-more" class="btn inline-block bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg mt-4">More Vibe</button>
        </div>
    </div>

    <!-- Hero Section -->
    <section id="hero" class="hero-bg flex items-center justify-center text-center">
        <div class="bg-black bg-opacity-50 p-10 rounded-lg fade-in">
            <lottie-player src="https://assets.lottiefiles.com/packages/lf20_kkflmtur.json" background="transparent" speed="1" style="width: 300px; height: 300px; margin: 0 auto;" loop autoplay></lottie-player>
            <h1 class="text-5xl md:text-7xl font-extrabold text-white mb-4">GameVibeHub</h1>
            <div id="typed-text" class="typed-text mb-6"></div>
            <a href="https://discord.gg/pJjGBDBZMG" target="_blank" class="btn inline-block bg-indigo-600 text-white font-semibold py-3 px-8 rounded-lg" aria-label="Join Discord Community">Join the Global Vibe!</a>
            <p class="text-gray-300 mt-4">Next TikTok Stream: <span id="stream-countdown">Loading...</span></p>
        </div>
    </section>

    <!-- TikTok Stream Section -->
    <section id="tiktok-stream" class="py-20 bg-gray-900">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl font-bold mb-12 fade-in">Catch Me Live on TikTok!</h2>
            <p class="text-xl text-gray-300 mb-6 fade-in">Join @whispers_from_within for epic Hearthstone battles and more!</p>
            <div class="bg-gray-800 p-6 rounded-lg max-w-md mx-auto fade-in">
                <p class="text-gray-300 mb-4">Daily streams at 8 PM EST. Don’t miss out!</p>
                <a href="https://www.tiktok.com/@whispers_from_within" target="_blank" class="btn inline-block bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg" aria-label="Watch on TikTok">Watch Now</a>
            </div>
            <!-- TikTok Embed -->
            <div class="mt-8 fade-in">
                <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@whispers_from_within" data-unique-id="whispers_from_within" data-embed-type="creator" style="max-width: 780px; min-width: 288px; margin: 0 auto;">
                    <section><a target="_blank" href="https://www.tiktok.com/@whispers_from_within">@whispers_from_within</a></section>
                </blockquote>
                <script async src="https://www.tiktok.com/embed.js"></script>
            </div>
        </div>
    </section>

    <!-- Daily Challenge Section -->
    <section id="daily-challenge" class="py-20 bg-gray-900">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl font-bold mb-12 fade-in">Daily Gaming Challenge</h2>
            <p class="text-xl text-gray-300 mb-6 fade-in">Take on today’s quest and share on #GameVibeHub!</p>
            <div class="bg-gray-800 p-6 rounded-lg max-w-md mx-auto fade-in">
                <p id="daily-challenge-text" class="text-2xl text-white mb-4"></p>
                <a href="https://twitter.com/intent/tweet?text=I’m tackling today’s GameVibeHub challenge: [Challenge]! Join me! https://discord.gg/pJjGBDBZMG #GameVibeHub" target="_blank" class="btn inline-block bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg" aria-label="Share Challenge on Twitter">Share on Twitter</a>
            </div>
        </div>
    </section>

    <!-- Poll Section -->
    <section id="poll" class="py-20 bg-gray-800">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl font-bold mb-12 fade-in">Vote for Your Favorite Game!</h2>
            <p class="text-xl text-gray-300 mb-6 fade-in">Which game rules your vibe? Cast your vote!</p>
            <div class="bg-gray-900 p-6 rounded-lg max-w-md mx-auto fade-in">
                <div class="space-y-4">
                    <button id="poll-hearthstone" class="btn bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg w-full" aria-label="Vote for Hearthstone">Hearthstone</button>
                    <button id="poll-fortnite" class="btn bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg w-full" aria-label="Vote for Fortnite">Fortnite</button>
                    <button id="poll-minecraft" class="btn bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg w-full" aria-label="Vote for Minecraft">Minecraft</button>
                </div>
                <p class="text-gray-300 mt-4">Results: <span id="poll-results">Loading...</span></p>
            </div>
        </div>
    </section>

    <!-- Mini Game Section -->
    <section id="mini-game" class="py-20 bg-gray-900">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl font-bold mb-12 fade-in">Hearthstone Card Clicker</h2>
            <p class="text-xl text-gray-300 mb-6 fade-in">Play cards to climb the global leaderboard!</p>
            <div class="bg-gray-800 p-6 rounded-lg fade-in">
                <div id="game-target" class="w-16 h-16 bg-yellow-500 rounded-lg mx-auto cursor-pointer transition-transform duration-200 hover:scale-110" role="button" aria-label="Click to play card"></div>
                <p class="text-2xl font-semibold text-white mt-4">Cards Played: <span id="game-score">0</span></p>
                <p class="text-gray-400 mt-2">Mana Level: <span id="mana-level">Novice</span></p>
                <div class="mt-4">
                    <input id="username-input" type="text" placeholder="Your Username" class="bg-gray-800 text-white p-2 rounded mb-2 w-full max-w-xs" aria-label="Enter username">
                    <button id="submit-score" class="btn inline-block bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg" aria-label="Submit Score">Submit Score</button>
                </div>
            </div>
            <h3 class="text-2xl font-bold mt-12 mb-6 fade-in">Global Leaderboard</h3>
            <div class="bg-gray-900 p-6 rounded-lg max-w-md mx-auto fade-in">
                <ul id="leaderboard-list" class="text-left text-gray-300"></ul>
                <p class="text-gray-400 mt-4">Join the top ranks!</p>
            </div>
        </div>
    </section>

    <!-- Meme Generator Section -->
    <section id="meme" class="py-20 bg-gray-900">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl font-bold mb-12 fade-in">AI-Powered Meme Generator</h2>
            <p class="text-xl text-gray-300 mb-6 fade-in">Create epic gaming memes with AI and go viral with #GameVibeHub!</p>
            <div class="bg-gray-900 p-6 rounded-lg max-w-md mx-auto fade-in">
                <input id="meme-input" type="text" placeholder="Enter your meme text..." class="bg-gray-800 text-white p-2 rounded mb-4 w-full" aria-label="Enter meme text">
                <select id="meme-template" class="bg-gray-800 text-white p-2 rounded mb-4 w-full" aria-label="Select meme template">
                    <option value="minecraft">Minecraft</option>
                    <option value="trollface">Trollface</option>
                    <option value="spongebob">Spongebob</option>
                    <option value="drake">Drake</option>
                    <option value="distracted-bf">Distracted Boyfriend</option>
                </select>
                <button id="generate-meme" class="btn inline-block bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg mb-4" aria-label="Generate Meme">Generate AI Meme</button>
                <div id="meme-canvas" class="mx-auto">
                    <canvas id="meme-image" width="300" height="200"></canvas>
                    <div id="meme-text"></div>
                </div>
                <button id="download-meme" class="btn inline-block bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg mt-4" aria-label="Download Meme">Download Meme</button>
            </div>
        </div>
    </section>

    <!-- Community Gallery Section -->
    <section id="gallery" class="py-20 bg-gray-800">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl font-bold mb-12 fade-in">Community Gallery</h2>
            <p class="text-xl text-gray-300 mb-6 fade-in">Share your epic gaming moments!</p>
            <div class="bg-gray-900 p-6 rounded-lg max-w-md mx-auto fade-in">
                <input id="gallery-url" type="text" placeholder="Paste image URL" class="bg-gray-800 text-white p-2 rounded mb-2 w-full" aria-label="Enter image URL">
                <input id="gallery-caption" type="text" placeholder="Add a caption" class="bg-gray-800 text-white p-2 rounded mb-2 w-full" aria-label="Enter caption">
                <button id="submit-gallery" class="btn inline-block bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg" aria-label="Submit to Gallery">Submit</button>
            </div>
            <div id="gallery-images" class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8"></div>
        </div>
    </section>

    <!-- Quote Generator Section -->
    <section id="quote" class="py-20 bg-gray-900">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl font-bold mb-12 fade-in">Epic Gaming Quote</h2>
            <p class="text-xl text-gray-300 mb-6 fade-in">Get inspired with a random gaming quote!</p>
            <div class="bg-gray-800 p-6 rounded-lg max-w-md mx-auto fade-in">
                <p id="quote-text" class="text-2xl text-white mb-4">"It's dangerous to go alone! Take this."</p>
                <button id="new-quote" class="btn inline-block bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg" aria-label="Get New Quote">New Quote</button>
            </div>
        </div>
    </section>

    <!-- Support the Creator Section -->
    <section id="support-creator" class="py-20 bg-gray-800">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl font-bold mb-12 fade-in">Support the Creator</h2>
            <p class="text-xl text-gray-300 mb-6 fade-in">Check out my book and support GameVibeHub!</p>
            <div class="bg-gray-900 p-6 rounded-lg max-w-md mx-auto fade-in">
                <h3 class="text-2xl font-semibold mb-2">Echo of Silence: Whispers of the Unseen</h3>
                <p class="text-gray-300 mb-4">Dive into a thrilling tale of mystery and adventure!</p>
                <a href="https://www.amazon.com/Echo-Silence-Whispers-Unseen-ebook/dp/B0DDJVPYRB?ref_=ast_author_dp" target="_blank" class="btn inline-block bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg" aria-label="Get the Book">Get the Book</a>
            </div>
            <a href="https://paypal.me/alexbaas88" target="_blank" class="btn inline-block bg-green-600 text-white font-semibold py-2 px-6 rounded-lg mt-6" aria-label="Donate via PayPal">Donate via PayPal</a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-10 bg-gray-800 text-center">
        <div class="container mx-auto px-4">
            <p class="text-gray-400 mb-4 fade-in">© 2025 GameVibeHub. All rights reserved.</p>
            <p class="text-gray-400 mb-4 fade-in">Powered by mana crystals, AI, and Grok’s vibes!</p>
            <div class="flex justify-center space-x-6">
                <a href="https://github.com/chasecraft88/chasecraft-live" target="_blank" class="text-gray-300 hover:text-yellow-500 fade-in" aria-label="GitHub">
                    <i class="fab fa-github text-2xl"></i>
                </a>
                <a href="https://twitter.com/ChaseCraft88" target="_blank" class="text-gray-300 hover:text-yellow-500 fade-in" aria-label="Twitter">
                    <i class="fab fa-twitter text-2xl"></i>
                </a>
                <a href="https://www.tiktok.com/@whispers_from_within" target="_blank" class="text-gray-300 hover:text-yellow-500 fade-in" aria-label="TikTok">
                    <i class="fab fa-tiktok text-2xl"></i>
                </a>
                <a href="https://discord.gg/pJjGBDBZMG" target="_blank" class="text-gray-300 hover:text-yellow-500 fade-in" aria-label="Discord">
                    <i class="fab fa-discord text-2xl"></i>
                </a>
                <a href="https://www.amazon.com/Echo-Silence-Whispers-Unseen-ebook/dp/B0DDJVPYRB?ref_=ast_author_dp" target="_blank" class="text-gray-300 hover:text-yellow-500 fade-in" aria-label="Book">
                    <i class="fas fa-book text-2xl"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- Firebase CDN -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';
        import { getDatabase, ref, push, onValue, increment, update } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js';

        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyB0QZQgiVJMmu0Dx91q5uYPsEEpWSDytoA",
            authDomain: "gamevibehub-ba607.firebaseapp.com",
            databaseURL: "https://gamevibehub-ba607-default-rtdb.firebaseio.com",
            projectId: "gamevibehub-ba607",
            storageBucket: "gamevibehub-ba607.firebasestorage.app",
            messagingSenderId: "743860292247",
            appId: "1:743860292247:web:63ca1a68cc6b480354b7d2"
        };
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Particles.js Initialization
        particlesJS('particles-js', {
            particles: {
                number: { value: 80, density: { enable: true, value_area: 800 } },
                color: { value: '#ffd700' },
                shape: { type: 'circle' },
                opacity: { value: 0.5, random: false },
                size: { value: 3, random: true },
                line_linked: { enable: true, distance: 150, color: '#ffd700', opacity: 0.4, width: 1 },
                move: { enable: true, speed: 6, direction: 'none', random: false, straight: false, out_mode: 'out', bounce: false }
            },
            interactivity: {
                detect_on: 'canvas',
                events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' }, resize: true },
                modes: { repulse: { distance: 100, duration: 0.4 }, push: { particles_nb: 4 } }
            },
            retina_detect: true
        });

        // Custom Cursor
        const cursor = document.getElementById('custom-cursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = `${e.clientX}px`;
            cursor.style.top = `${e.clientY}px`;
            const trail = document.createElement('div');
            trail.className = 'cursor-trail';
            trail.style.left = `${e.clientX - 4}px`;
            trail.style.top = `${e.clientY - 4}px`;
            document.body.appendChild(trail);
            setTimeout(() => trail.remove(), 500);
        });

        // Typing Effect
        let typed;
        function startTyping() {
            typed = new Typed('#typed-text', {
                strings: [
                    'Welcome to GameVibeHub!',
                    'Slam *Hearthstone* cards live on TikTok!',
                    'Cast spells in *Magic: The Gathering*!',
                    'Build epic *Minecraft* creations!',
                    'Drop *Fortnite* dubs with us!',
                    'Create AI memes and go viral!',
                    'Chat with Grok for epic vibes!',
                    'Join daily global challenges!'
                ],
                typeSpeed: 50,
                backSpeed: 30,
                backDelay: 1000,
                loop: true,
                showCursor: true,
                cursorChar: '█'
            });
        }

        // Sprite Animation
        const sprite = document.getElementById('sprite');
        let hasTriggeredTyping = false;

        function checkSpritePosition() {
            const spriteRect = sprite.getBoundingClientRect();
            const spriteY = spriteRect.top + window.scrollY;

            if (!hasTriggeredTyping && spriteY > document.getElementById('hero').getBoundingClientRect().top + window.scrollY) {
                startTyping();
                hasTriggeredTyping = true;
            }

            document.querySelectorAll('section').forEach(section => {
                const rect = section.getBoundingClientRect();
                if (spriteY > rect.top + window.scrollY) {
                    section.classList.add('visible');
                }
            });

            if (spriteY > document.body.scrollHeight) {
                sprite.style.top = '-100px';
            }

            const cursorRect = cursor.getBoundingClientRect();
            const dx = spriteRect.left - cursorRect.left;
            const dy = spriteRect.top - cursorRect.top;
            const distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < 100) {
                sprite.style.animation = 'floatDown 15s linear infinite, bob 1s ease-in-out infinite, sway 4s ease-in-out infinite';
            } else {
                sprite.style.animation = 'floatDown 15s linear infinite, bob 2s ease-in-out infinite, sway 4s ease-in-out infinite';
            }
        }

        function animate() {
            checkSpritePosition();
            requestAnimationFrame(animate);
        }
        animate();

        // Grok Side Panel
        const grokToggle = document.getElementById('grok-toggle');
        const grokPanel = document.getElementById('grok-panel');
        const grokChat = document.getElementById('grok-chat');
        const grokMore = document.getElementById('grok-more');
        const grokBanter = [
            'Dropped a 10-mana Hearthstone combo yet?',
            'Your Minecraft build got more glow than a beacon!',
            'Bet you can’t bluff me in Poker!',
            'Fortnite Victory Royale or Tilted Towers wipe?',
            'Grok’s got 99 mana crystals, but your vibe ain’t one!'
        ];

        function addGrokMessage(message) {
            const div = document.createElement('div');
            div.className = 'chat-message';
            div.textContent = message;
            grokChat.appendChild(div);
            grokChat.scrollTop = grokChat.scrollHeight;
        }

        grokToggle.addEventListener('click', () => {
            grokPanel.classList.toggle('open');
            if (grokPanel.classList.contains('open') && grokChat.children.length === 0) {
                addGrokMessage('Yo, what’s the vibe? Ready for some GameVibeHub chaos?');
            }
        });

        grokMore.addEventListener('click', () => {
            const randomBanter = grokBanter[Math.floor(Math.random() * grokBanter.length)];
            addGrokMessage(randomBanter);
        });

        // TikTok Stream Countdown
        const countdownElement = document.getElementById('stream-countdown');
        function updateCountdown() {
            const now = new Date();
            const nextStream = new Date();
            nextStream.setHours(20, 0, 0, 0); // 8 PM EST
            if (now.getHours() >= 20) {
                nextStream.setDate(now.getDate() + 1);
            }
            const timeLeft = nextStream - now;
            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            countdownElement.textContent = `${hours}h ${minutes}m`;
        }
        setInterval(updateCountdown, 60000);
        updateCountdown();

        // Daily Challenge
        const challengeText = document.getElementById('daily-challenge-text');
        const challenges = [
            'Build a *Hearthstone* deck with only 3 mana cards!',
            'Share a *Fortnite* clip on TikTok!',
            'Craft a *Minecraft* monument in 1 hour!',
            'Show your *Warframe* build on Discord!'
        ];
        const today = new Date().getDay();
        challengeText.textContent = challenges[today % challenges.length];
        document.querySelector('#daily-challenge a').href = `https://twitter.com/intent/tweet?text=I’m tackling today’s GameVibeHub challenge: ${challenges[today % challenges.length]}! Join me! https://discord.gg/pJjGBDBZMG #GameVibeHub`;

        // Poll System
        const pollButtons = {
            hearthstone: document.getElementById('poll-hearthstone'),
            fortnite: document.getElementById('poll-fortnite'),
            minecraft: document.getElementById('poll-minecraft')
        };
        const pollResults = document.getElementById('poll-results');

        Object.keys(pollButtons).forEach(game => {
            pollButtons[game].addEventListener('click', () => {
                if (localStorage.getItem('hasVoted')) {
                    alert('You can only vote once per session! Refresh to vote again.');
                    return;
                }
                update(ref(database, `polls/${game}`), { votes: increment(1) })
                    .then(() => {
                        localStorage.setItem('hasVoted', 'true');
                        alert('Vote counted! Check the results!');
                    })
                    .catch(error => alert('Error voting: ' + error.message));
            });
        });

        onValue(ref(database, 'polls'), (snapshot) => {
            const data = snapshot.val() || { hearthstone: { votes: 0 }, fortnite: { votes: 0 }, minecraft: { votes: 0 } };
            const total = (data.hearthstone.votes || 0) + (data.fortnite.votes || 0) + (data.minecraft.votes || 0);
            pollResults.textContent = total ? `Hearthstone: ${data.hearthstone.votes || 0}, Fortnite: ${data.fortnite.votes || 0}, Minecraft: ${data.minecraft.votes || 0}` : 'No votes yet!';
        });

        // Mini Game and Leaderboard
        const gameTarget = document.getElementById('game-target');
        const gameScore = document.getElementById('game-score');
        const manaLevel = document.getElementById('mana-level');
        const usernameInput = document.getElementById('username-input');
        const submitScoreButton = document.getElementById('submit-score');
        const leaderboardList = document.getElementById('leaderboard-list');
        let score = 0;
        const levels = [
            { threshold: 0, name: 'Novice' },
            { threshold: 10, name: 'Apprentice' },
            { threshold: 20, name: 'Master' },
            { threshold: 50, name: 'Legend' }
        ];

        gameTarget.addEventListener('click', (e) => {
            score++;
            gameScore.textContent = score;
            const level = levels.find(l => score >= l.threshold) || levels[0];
            manaLevel.textContent = level.name;
            gameTarget.style.transform = 'scale(1.2)';
            setTimeout(() => gameTarget.style.transform = 'scale(1)', 100);
            const explosion = document.createElement('div');
            explosion.className = 'mana-explosion';
            explosion.style.left = `${e.clientX - 25}px`;
            explosion.style.top = `${e.clientY - 25}px`;
            document.body.appendChild(explosion);
            setTimeout(() => explosion.remove(), 500);
        });

        submitScoreButton.addEventListener('click', () => {
            const username = usernameInput.value.trim();
            if (username && score > 0) {
                if (localStorage.getItem('hasSubmitted')) {
                    alert('You can only submit one score per session! Refresh to play again.');
                    return;
                }
                push(ref(database, 'leaderboard'), {
                    username: username,
                    score: score,
                    timestamp: Date.now()
                }).then(() => {
                    localStorage.setItem('hasSubmitted', 'true');
                    usernameInput.value = '';
                    score = 0;
                    gameScore.textContent = score;
                    manaLevel.textContent = 'Novice';
                    alert('Score submitted! Check the leaderboard!');
                }).catch(error => {
                    alert('Error submitting score: ' + error.message);
                });
            } else {
                alert('Please enter a username and play some cards!');
            }
        });

        onValue(ref(database, 'leaderboard'), (snapshot) => {
            leaderboardList.innerHTML = '';
            const scores = [];
            snapshot.forEach(child => {
                scores.push(child.val());
            });
            scores.sort((a, b) => b.score - a.score).slice(0, 5).forEach((entry, index) => {
                const li = document.createElement('li');
                li.className = 'mb-2';
                li.textContent = `${index === 0 ? '🥇' : index === 1 ? '🥈' : index === 2 ? '🥉' : '🏅'} ${entry.username} - ${entry.score} Cards`;
                leaderboardList.appendChild(li);
            });
            if (scores.length === 0) {
                leaderboardList.innerHTML = '<li class="mb-2">No scores yet! Be the first!</li>';
            }
        });

        // Meme Generator
        const memeInput = document.getElementById('meme-input');
        const memeTemplate = document.getElementById('meme-template');
        const memeText = document.getElementById('meme-text');
        const generateMeme = document.getElementById('generate-meme');
        const memeCanvas = document.getElementById('meme-image');
        const downloadMeme = document.getElementById('download-meme');
        const ctx = memeCanvas.getContext('2d');

        function drawFallbackMeme(text) {
            ctx.fillStyle = '#ffd700';
            ctx.fillRect(0, 0, 300, 200);
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(10, 10, 280, 180);
            ctx.fillStyle = '#ffd700';
            ctx.fillRect(120, 80, 60, 40);
            ctx.fillStyle = '#ffffff';
            ctx.font = '16px Press Start 2P';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.shadowColor = '#000000';
            ctx.shadowOffsetX = 2;
            ctx.shadowOffsetY = 2;
            const lines = text.match(/.{1,20}(\s|$)/g) || [text];
            lines.forEach((line, i) => {
                ctx.fillText(line.trim(), 150, 100 + i * 20);
            });
        }

        memeInput.addEventListener('input', () => {
            memeText.textContent = memeInput.value || 'Enter your meme text...';
        });

        generateMeme.addEventListener('click', async () => {
            const text = memeInput.value || 'Your Meme Here';
            const template = memeTemplate.value;
            const words = text.split(' ');
            const half = Math.ceil(words.length / 2);
            const topText = words.slice(0, half).join(' ').replace(/ /g, '_').toUpperCase();
            const bottomText = words.slice(half).join(' ').replace(/ /g, '_').toUpperCase();
            const memeUrl = `https://api.memegen.link/images/${template}/${topText}/${bottomText}.png?width=300&height=200&font=impact`;

            try {
                const response = await fetch(memeUrl);
                if (!response.ok) throw new Error('MemeGen.link API failed');
                const blob = await response.blob();
                const img = new Image();
                img.crossOrigin = 'Anonymous';
                img.onload = () => {
                    ctx.drawImage(img, 0, 0, 300, 200);
                    ctx.fillStyle = '#ffffff';
                    ctx.font = '16px Press Start 2P';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.shadowColor = '#000000';
                    ctx.shadowOffsetX = 2;
                    ctx.shadowOffsetY = 2;
                    const lines = text.match(/.{1,20}(\s|$)/g) || [text];
                    lines.forEach((line, i) => {
                        ctx.fillText(line.trim(), 150, 100 + i * 20);
                    });
                };
                img.onerror = () => {
                    drawFallbackMeme(text);
                    alert('Failed to generate meme. Using fallback.');
                };
                img.src = URL.createObjectURL(blob);
            } catch (error) {
                drawFallbackMeme(text);
                alert('Error generating meme: ' + error.message);
            }
        });

        downloadMeme.addEventListener('click', () => {
            const link = document.createElement('a');
            link.href = memeCanvas.toDataURL('image/png');
            link.download = 'gamevibehub-meme.png';
            link.click();
        });

        drawFallbackMeme('Your Meme Here');

        // Community Gallery
        const galleryUrl = document.getElementById('gallery-url');
        const galleryCaption = document.getElementById('gallery-caption');
        const submitGallery = document.getElementById('submit-gallery');
        const galleryImages = document.getElementById('gallery-images');

        submitGallery.addEventListener('click', () => {
            const url = galleryUrl.value.trim();
            const caption = galleryCaption.value.trim();
            if (url && caption) {
                push(ref(database, 'gallery'), {
                    url,
                    caption,
                    timestamp: Date.now()
                }).then(() => {
                    galleryUrl.value = '';
                    galleryCaption.value = '';
                    alert('Image submitted! Check the gallery!');
                }).catch(error => {
                    alert('Error submitting image: ' + error.message);
                });
            } else {
                alert('Please enter an image URL and caption!');
            }
        });

        onValue(ref(database, 'gallery'), (snapshot) => {
            galleryImages.innerHTML = '';
            const images = [];
            snapshot.forEach(child => {
                images.push(child.val());
            });
            images.sort((a, b) => b.timestamp - a.timestamp).slice(0, 6).forEach(image => {
                const div = document.createElement('div');
                div.className = 'bg-gray-800 p-4 rounded-lg';
                div.innerHTML = `
                    <img src="${image.url}" alt="${image.caption}" class="w-full h-48 object-cover rounded-lg mb-2" loading="lazy">
                    <p class="text-gray-300">${image.caption}</p>
                `;
                galleryImages.appendChild(div);
            });
        });

        // Quote Generator
        const quoteText = document.getElementById('quote-text');
        const newQuoteButton = document.getElementById('new-quote');
        const quotes = [
            "It's dangerous to go alone! Take this. - The Legend of Zelda",
            "Do a barrel roll! - Star Fox 64",
            "Finish him! - Mortal Kombat",
            "The cake is a lie. - Portal",
            "Stay awhile and listen! - Diablo"
        ];

        newQuoteButton.addEventListener('click', () => {
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            quoteText.textContent = randomQuote;
        });

        // Fade-in
        const fadeIns = document.querySelectorAll('.fade-in');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });
        fadeIns.forEach(element => observer.observe(element));
    </script>
</body>
</html>
